# Ampeers Energy Python Template

Ampeers Energy Python template and best practices, similiar to [AE's Node.js template](https://github.com/ampeersenergy/ampeers-template-nodejs-project).


## How to use this repo

* For new repositories, you may use this repository as a template.
* For existing repositories, feel free to introduce its elements as appropriate.


## General setup

See [Python Dev Workstation Setup](https://www.notion.so/Python-Dev-Workstation-Setup-d0ff7cb4f9df474ba9168670e8973449) for detailed instructions.
We generally favor the use of
* [pyenv](https://github.com/pyenv/pyenv) for Python version management (comparable to [nvm](https://github.com/nvm-sh/nvm))
* [Poetry](https://python-poetry.org/) as package manager (comparable to [Yarn](https://yarnpkg.com/))

For the repository setup it is assumed that you have Python (not necessarily via pyenv) and Poetry properly installed.
We use Python 3.10 whenever possible.
If you you require non-updated packages, use Python 3.8.
It is recommended to use virtual environments in each project via ```poetry config virtualenvs.in-project true```.


## Setup the repo

After cloning the repo, run
```
poetry install
```
and
```
pre-commit install
```
and familiarize yourself with [AE's version control conventions](https://www.notion.so/git-Version-Control-6f03e0b4fa6d4bddaba027306152701f) if you are not aware of them.

## Tools

### Pre-commit
[Pre-commit](https://pre-commit.com/) ensures that all checks defined in _.pre-commit-config.yaml_ pass before you commit and push and thereby saving lots of time and confusion.


### Black
We use [Black - The uncompromising code formatter](https://black.readthedocs.io/en/stable/index.html) for formatting.
Read about the style and its philosophy [here](https://black.readthedocs.io/en/stable/the_black_code_style/current_style.html).

### isort
We use [isort](https://pycqa.github.io/isort/index.html) for sorting and formatting the imports.
The [Black profile](https://pycqa.github.io/isort/docs/configuration/black_compatibility.html) needs to be configured as done in this repo in _pyproject.toml_ and _.pre-commit-config.yaml_.

### Sphinx
Use [Sphinx](https://www.sphinx-doc.org/en/master/) for documentation (generation).


## Other things

### Settings and secrets
Don't ever commit secrets. Use, e.g., [Pydantic](https://pydantic-docs.helpmanual.io/) as shown as shown in this repo or [python-decouple](https://github.com/henriquebastos/python-decouple/).

### Notebooks
[Jupyter notebooks](https://jupyter.org/) can be very handy for experimenting and speeding up development with unfamiliar packages.
The VS Code [notebook extension](https://code.visualstudio.com/docs/datascience/jupyter-notebooks) may be convenient if you frequently need to switch from notebooks to code files and vice versa, see template notebook.

## Template files
* .env-template: Template for creating a .env file with settings and secrets for Pydantic
* .gitignore: GitHub's default Python .gitignore file
* .pre-commit-config.yaml: configures the pre-commit tool
* .python-version: sets (local) Python version for pyenv users
* poetry.lock: lock file generated by Poetry
* pyproject.toml: project meta data according to [PEP 621](https://peps.python.org/pep-0621/)


## ToDos & Open Topics
* GitHub action templates
* Add proper Sphinx template documenation
* Add template Dockerfile (do we have a standard one already?)
* Static type checking via [MyPy](http://mypy-lang.org/) (not a priority now?)
* GitHub issue templates (do we need / use them?)
* ...
